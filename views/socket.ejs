<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.6.1/socket.io.js" integrity="sha512-xbQU0+iHqhVt7VIXi6vBJKPh3IQBF5B84sSHdjKiSccyX/1ZI7Vnkt2/8y8uruj63/DVmCxfUNohPNruthTEQA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</head>

<body>
  <div class="container p-3">
    <h1>채팅방</h1>
    <main class="my-3 border p-3">
      여기에 메시지
    </main>
    <div class="input-group">
      <input type="text" class="form-control" id="userMsg">
      <button id="send" class="btn btn-primary">Send Message</button>
    </div>

    <script>
      const socket = io(); // 웹 소켓에 접속
      const sendBtn = document.getElementById('send');
      sendBtn.addEventListener('click', () => {
        const userMsg = document.getElementById('userMsg').value;
        socket.emit('user-send', userMsg);
      })

      // 서버 메시지 수신
      socket.on('broadcast', (msg) => {
        console.log(msg);
        const main = document.querySelector('main');
        const html = `<p>${msg}</p>`;
        main.innerHTML += html;
      })
    </script>
  </div>
 

</body>

</html> 